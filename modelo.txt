# LOKI - Chatbot Gu√≠a Emocional
## Resumen Ejecutivo para Desarrollo

---

## üéØ CONCEPTO CORE

**Chatbot de WhatsApp impulsado por IA** que registra estados emocionales y h√°bitos de manera conversacional, no intrusiva pero constante, generando reportes personalizados y correlaciones significativas entre acciones y bienestar emocional.

**Objetivo:** Crear un v√≠nculo genuino donde las personas *esperen* el mensaje de Loki, convirti√©ndolo en un compa√±ero de bienestar, no solo una app de tracking.

---

## üèóÔ∏è ARQUITECTURA DEL SISTEMA

### **3 Componentes Principales:**

1. **Bot de WhatsApp (Loki)**
   - WhatsApp Business API
   - IA conversacional (Claude API o GPT-4)
   - Sistema de memoria contextual profunda

2. **Backend & Base de Datos**
   - Registro de estados de √°nimo, h√°bitos, conversaciones
   - Motor de an√°lisis y correlaciones
   - Sistema de alertas y frecuencia adaptativa

3. **Dashboard Web**
   - Visualizaci√≥n de reportes
   - Gesti√≥n de h√°bitos y configuraciones
   - Exportaci√≥n de datos

---

## üìä MODELO DE DATOS

### **Tablas principales:**

```sql
Usuarios
- id, nombre, telefono, timezone, nivel_CMV
- preferencias_tracking, frecuencia_checkins
- fecha_registro

EstadosAnimo
- usuario_id, timestamp, nivel (1-10)
- notas_texto, contexto_extraido
- disparadores_detectados

Habitos (cat√°logo personal)
- usuario_id, nombre_habito, categoria
- objetivo_semanal, activo

RegistrosHabitos
- usuario_id, habito_id, timestamp
- completado, notas

ConversacionesContexto
- usuario_id, timestamp, mensaje_usuario
- respuesta_loki, entidades_extraidas
- categorias_detectadas

Correlaciones (calculadas)
- usuario_id, factor, impacto_animo
- confianza_estadistica, num_datos
```

---

## üß† SISTEMA DE IA CONVERSACIONAL

### **Personalidad de Loki:**
- Emp√°tico pero no paternalista
- Memoria contextual completa
- Aprende de cada interacci√≥n
- Adapta tono seg√∫n estado emocional del usuario

### **Capacidades clave:**

**1. Tracking flexible:**
- Formal: H√°bitos predefinidos por usuario
- Informal: Extracci√≥n de patrones conversacionales mediante NLP
- Ejemplo: Usuario menciona "sal√≠ con amigos" ‚Üí Loki registra factor social

**2. Indagaci√≥n inteligente:**
```
Usuario: "8/10 hoy"
Loki: "¬°Qu√© bueno! ¬øQu√© crees que hizo que te sintieras as√≠?"
‚Üí Extrae contexto ‚Üí Construye perfil sin formularios r√≠gidos
```

**3. Detecci√≥n de patrones:**
- Identifica en texto libre: trabajo, sue√±o, social, ejercicio, estr√©s
- Categoriza autom√°ticamente sin que usuario lo estructure
- Propone convertir patrones en h√°bitos formales

---

## üìà CMV (CONTEXTO M√çNIMO VIABLE)

Sistema de niveles que determina qu√© puede hacer Loki:

### **Nivel 0 - Onboarding (D√≠a 1)**
- Recolecci√≥n b√°sica: nombre, timezone, 3-5 h√°bitos
- Modo aprendizaje puro: solo escucha y registra

### **Nivel 1 - CMV B√°sico (5-7 d√≠as)**
**Requiere:**
- 10-15 registros de √°nimo
- 5+ registros de h√°bitos o conversaciones
- 1 ciclo completo semana

**Puede hacer:**
- Promedios b√°sicos
- Correlaciones iniciales con disclaimer
- "Es temprano pero noto que..."

### **Nivel 2 - CMV Completo (15-20 d√≠as)**
**Requiere:**
- 30-40 registros de √°nimo
- 15-20 registros de h√°bitos/contexto
- 2-3 semanas de datos variados

**Puede hacer:**
- Correlaciones estad√≠sticamente significativas
- Sugerencias proactivas basadas en patrones
- Intervenciones adaptativas con confianza

### **Nivel 3 - Perfil Avanzado (30+ d√≠as)**
**Puede hacer:**
- Predicciones ("normalmente los lunes bajas")
- Detecci√≥n de ciclos y tendencias
- Comparaciones temporales
- Alertas predictivas

---

## üîÑ SISTEMA DE FRECUENCIA ADAPTATIVA

**Tracking din√°mico basado en estado:**

```
√Ånimo normal (6-10): 2-3 check-ins/d√≠a
  ‚îî‚îÄ Ma√±ana, tarde, noche

√Ånimo bajo (4-5): 4-5 check-ins/d√≠a
  ‚îî‚îÄ Cada 3-4 horas
  ‚îî‚îÄ Recordatorios de h√°bitos que suelen ayudar

Estado cr√≠tico (1-3 por 2+ d√≠as): Modo acompa√±amiento
  ‚îî‚îÄ Check-ins cada 2-3 horas
  ‚îî‚îÄ Recursos de ayuda profesional
  ‚îî‚îÄ "Hoy estar√© m√°s atento a ti"
```

---

## üö® SISTEMA DE RESPUESTA INTELIGENTE

### **Escenario 1: Usuario con historial**
```
Usuario: 3/10 me siento mal
Loki: "Veo que llevas 3 d√≠as sin ejercicio, y normalmente 
cuando lo haces subes a 7-8. No presiono, solo recuerdo 
lo que suele ayudarte"
```

### **Escenario 2: Usuario sin datos suficientes**
```
Usuario: Estoy terrible
Loki: "Como a√∫n nos estamos conociendo, no s√© qu√© te 
ayuda. ¬øHacemos check-ins m√°s seguidos hoy para 
identificar juntos qu√© te hace sentir mejor?

Y recuerda: nunca est√° de m√°s hablar con alguien 
cercano o un profesional"
```

### **Escenario 3: Crisis detectada**
```
Loki: "Llevas 4 d√≠as con √°nimo bajo (promedio 3.5). 
Eso me preocupa. ¬øHas considerado hablar con alguien?

[Ofrece l√≠neas de crisis seg√∫n pa√≠s]

Mientras tanto estar√© m√°s atento. ¬øHablamos cada 
3 horas hoy?"
```

---

## üìä REPORTES Y ANALYTICS

### **Reporte semanal incluye:**

**Tu semana emocional:**
- Promedio, mejor/peor d√≠a
- Gr√°fica de tendencia

**H√°bitos y bienestar:**
- D√≠as con h√°bito X: √°nimo promedio Y
- Rachas actuales
- Correlaciones detectadas

**Insights generados por IA:**
- "Tus lunes son consistentemente dif√≠ciles"
- "Cuando haces ejercicio, subes 2.3 puntos"
- "Llevas 5 d√≠as sin contacto social y tu √°nimo baj√≥"

**Alertas:**
- Identificaci√≥n de patrones preocupantes
- Sugerencias de cambio basadas en TUS datos

### **Dashboard web muestra:**
- Gr√°ficas interactivas de √°nimo/h√°bitos
- Heatmaps de mejor/peor momento del d√≠a
- Correlaciones con confianza estad√≠stica
- Patrones conversacionales detectados
- Estado del CMV (% de perfil completo)
- Exportaci√≥n a PDF

---

## üõ°Ô∏è CONSIDERACIONES CR√çTICAS

### **√âtica y seguridad:**
- ‚úÖ Dejar claro que NO es terapia
- ‚úÖ Derivar a profesionales en crisis
- ‚úÖ No diagnosticar, solo validar emociones
- ‚úÖ Encriptaci√≥n end-to-end
- ‚úÖ L√≠neas de crisis seg√∫n pa√≠s del usuario

### **Privacidad:**
- Datos sensibles encriptados
- Opci√≥n de "pausar tracking"
- Nunca compartir sin consentimiento expl√≠cito
- GDPR compliant

### **Detecci√≥n de crisis:**
Protocolo especial si detecta frases como:
- "No quiero estar aqu√≠"
- "Ser√≠a m√°s f√°cil si no existiera"
- Menci√≥n de autolesi√≥n

‚Üí Activar recursos de emergencia inmediatos

---

## üéØ MVP (M√çNIMO VIABLE)

### **Fase 1 - Probar el v√≠nculo (2-3 semanas de desarrollo):**

**Features esenciales:**
1. Bot de WhatsApp funcional
2. 2-3 check-ins diarios de √°nimo
3. Tracking de 3-5 h√°bitos elegidos por usuario
4. Indagaci√≥n conversacional b√°sica ("¬øpor qu√© te sientes as√≠?")
5. Base de datos registrando todo
6. Reporte semanal b√°sico v√≠a WhatsApp (texto)
7. Sistema de frecuencia adaptativa b√°sico

**Objetivo:** Validar si la gente crea v√≠nculo con Loki

### **Fase 2 - Dashboard y an√°lisis (siguiente):**
1. Dashboard web con visualizaciones
2. Correlaciones autom√°ticas
3. Sistema CMV completo
4. NLP avanzado para extracci√≥n de patrones

### **Fase 3 - Optimizaci√≥n:**
1. Predicciones y alertas proactivas
2. Sugerencias de nuevos h√°bitos basadas en perfil
3. Integraci√≥n con wearables (opcional)
4. Comunidad/grupos de apoyo

---

## üîß STACK TECNOL√ìGICO SUGERIDO

**Backend:**
- Node.js o Python (FastAPI)
- WhatsApp Business API
- PostgreSQL o MongoDB
- Claude API o GPT-4 para conversaciones

**IA/NLP:**
- Extracci√≥n de entidades (spaCy o API de Claude)
- An√°lisis de sentimiento contextual
- Sistema de prompts cuidadosamente dise√±ado

**Frontend:**
- React o Next.js
- Chart.js / D3.js para visualizaciones
- Autenticaci√≥n segura (Auth0 o similar)

**Infraestructura:**
- Heroku/Railway/AWS para hosting
- Webhooks para WhatsApp
- Cron jobs para check-ins programados

---

## üí° VALOR DIFERENCIAL

**Lo que hace √∫nico a Loki:**

1. ‚úÖ **Conversacional, no formularios**: Aprende a trav√©s de di√°logo natural
2. ‚úÖ **Tracking dual**: Formal (h√°bitos) + Informal (conversaciones)
3. ‚úÖ **Frecuencia adaptativa**: M√°s atento cuando m√°s lo necesitas
4. ‚úÖ **Insights personalizados**: Basados en TUS datos, no gen√©ricos
5. ‚úÖ **V√≠nculo emocional**: Dise√±ado para que lo esperes, no que lo ignores
6. ‚úÖ **WhatsApp**: Donde la gente ya est√°, sin nueva app

---

## ‚úÖ CHECKLIST DE INICIO DE DESARROLLO

- [ ] Configurar WhatsApp Business API
- [ ] Dise√±ar schema de base de datos
- [ ] Crear sistema de prompts para Loki (personalidad base)
- [ ] Implementar flujo de onboarding
- [ ] Sistema b√°sico de check-ins programados
- [ ] Registro de √°nimo + indagaci√≥n simple
- [ ] L√≥gica de frecuencia adaptativa
- [ ] C√°lculo de correlaciones b√°sicas
- [ ] Reporte semanal por WhatsApp
- [ ] Protocolo de crisis/recursos de ayuda

---

**¬øListo para empezar a construir?** üöÄ